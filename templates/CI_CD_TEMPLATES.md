# ðŸš€ CI/CD Test Templates

> **QC-Kit Standard CI/CD Configurations**
> Version: 1.0

---

## GitHub Actions - Playwright E2E

```yaml
# .github/workflows/e2e.yml
name: E2E Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Install Playwright Browsers
        run: npx playwright install --with-deps
      
      - name: Run Playwright tests
        run: npx playwright test
        env:
          BASE_URL: ${{ secrets.STAGING_URL }}
      
      - name: Upload test report
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
      
      - name: Upload screenshots on failure
        uses: actions/upload-artifact@v4
        if: failure()
        with:
          name: test-screenshots
          path: test-results/
```

---

## GitHub Actions - API Tests

```yaml
# .github/workflows/api-tests.yml
name: API Tests

on:
  push:
    branches: [main]
  schedule:
    - cron: '0 */6 * * *'  # Every 6 hours

jobs:
  api-test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run API tests
        run: npx playwright test --project=api
        env:
          API_BASE_URL: ${{ secrets.API_URL }}
          API_TOKEN: ${{ secrets.API_TOKEN }}
```

---

## GitHub Actions - k6 Performance

```yaml
# .github/workflows/performance.yml
name: Performance Tests

on:
  workflow_dispatch:  # Manual trigger
  schedule:
    - cron: '0 2 * * 1'  # Every Monday 2 AM

jobs:
  k6-load-test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Run k6 load test
        uses: grafana/k6-action@v0.3.1
        with:
          filename: tests/load/performance.js
          flags: --out json=results.json
        env:
          K6_CLOUD_TOKEN: ${{ secrets.K6_CLOUD_TOKEN }}
      
      - name: Upload results
        uses: actions/upload-artifact@v4
        with:
          name: k6-results
          path: results.json
```

---

## GitLab CI - Full Pipeline

```yaml
# .gitlab-ci.yml
stages:
  - test
  - e2e
  - performance

variables:
  NODE_VERSION: "20"

unit-tests:
  stage: test
  image: node:${NODE_VERSION}
  script:
    - npm ci
    - npm run test:unit
  coverage: '/All files[^|]*\|[^|]*\s+([\d\.]+)/'

e2e-tests:
  stage: e2e
  image: mcr.microsoft.com/playwright:v1.40.0-jammy
  script:
    - npm ci
    - npx playwright test
  artifacts:
    when: always
    paths:
      - playwright-report/
    expire_in: 1 week
  only:
    - main
    - merge_requests

performance-tests:
  stage: performance
  image: grafana/k6:latest
  script:
    - k6 run tests/load/performance.js --out json=results.json
  artifacts:
    paths:
      - results.json
  only:
    - main
  when: manual
```

---

## Pre-commit Hook

```bash
#!/bin/bash
# .husky/pre-commit

# Run lint
npm run lint

# Run unit tests
npm run test:unit -- --passWithNoTests

# Run smoke tests only
npx playwright test --grep @smoke

echo "âœ… Pre-commit checks passed"
```

---

*Templates generated by QC-Kit v1.0*
